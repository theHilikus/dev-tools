# bashrc for windows using git bash
# it also needs git-prompt.sh in ~/.config/git

# Enable git autocomplete
if test -z "$WINELOADERNOEXEC"
then
		GIT_EXEC_PATH="$(git --exec-path 2>/dev/null)"
		COMPLETION_PATH="${GIT_EXEC_PATH%/libexec/git-core}"
		COMPLETION_PATH="${COMPLETION_PATH%/lib/git-core}"
		COMPLETION_PATH="$COMPLETION_PATH/share/git/completion"
		if test -f "$COMPLETION_PATH/git-prompt.sh"
		then
			. "$COMPLETION_PATH/git-completion.bash"
			. "$COMPLETION_PATH/git-prompt.sh"
		fi
fi

# Config git prompt
GIT_PS1_SHOWDIRTYSTATE=1
GIT_PS1_SHOWUNTRACKEDFILES=1
GIT_PS1_SHOWUPSTREAM="auto"
GIT_PS1_SHOWCOLORHINTS=0
GIT_PS1_STATESEPARATOR="|"

# Set prompt
__PS1_BEFORE='\[\033]0;$TITLEPREFIX:$PWD\007\]\n\n'
__PS1_TIME='\[\e[97;104m\][\A] '
__PS1_DIR='\[\e[30;43m\] \w '
__PS1_GIT_BRANCH='\[\e[97;45m\] `__git_ps1 "(%s)"`'
__PS1_AFTER='\[\e[0m\]\n\n$ '
export PS1="${__PS1_BEFORE}${__PS1_TIME}${__PS1_DIR}${__PS1_GIT_BRANCH}${__PS1_AFTER}"
